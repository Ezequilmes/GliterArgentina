runtime: nodejs20
entrypoint: npm start

env:
  - key: NODE_ENV
    value: production
  - key: PORT
    value: "8080"
  - key: NEXT_TELEMETRY_DISABLED
    value: "1"
  - key: NEXT_PUBLIC_FIREBASE_API_KEY
    value: "AIzaSyBDaKVYlJSfIJ7nKeIkTEWSmhlB1Soqay0"
  - key: NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN
    value: "gliter-argentina.firebaseapp.com"
  - key: NEXT_PUBLIC_FIREBASE_DATABASE_URL
    value: "https://gliter-argentina-default-rtdb.firebaseio.com/"
  - key: NEXT_PUBLIC_FIREBASE_PROJECT_ID
    value: "gliter-argentina"
  - key: NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET
    value: "gliter-argentina.firebasestorage.app"
  - key: NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID
    value: "1084162955705"
  - key: NEXT_PUBLIC_FIREBASE_APP_ID
    value: "1:1084162955705:web:25bb32180d1bdaf724fe68"
  - key: NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID
    value: "G-MMFQWWFCJD"
  - key: NEXT_PUBLIC_FIREBASE_VAPID_KEY
    value: "BGVjAOjpQTeTCnmNcFrrLHsaHA7a1KSSsn7n0msDXz_0kH_rIkuqNUwYRQn4BnH0-fa-pY24OW3rZDYKwUYbPW4"

build:
  command: |
    echo ">>> Cleaning environment"
    rm -rf node_modules package-lock.json
    echo ">>> Installing production deps"
    npm install
    npm ci --omit=dev
    npm run type-check
    npm run build

resources:
  cpu: 2
  memoryMiB: 4096
  diskMiB: 8192

handlers:
  - glob: '**'
    script: auto