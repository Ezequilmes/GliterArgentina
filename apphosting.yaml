runtime: nodejs20
entrypoint: npm run start

env:
  - key: NODE_ENV
    value: production
  - key: NEXT_TELEMETRY_DISABLED
    value: "1"
  - key: PORT
    value: "8080"
  # Firebase Configuration
  - key: NEXT_PUBLIC_FIREBASE_API_KEY
    value: AIzaSyBDaKVYlJSfIJ7nKeIkTEWSmhlB1Soqay0
  - key: NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN
    value: gliter-argentina.firebaseapp.com
  - key: NEXT_PUBLIC_FIREBASE_DATABASE_URL
    value: https://gliter-argentina-default-rtdb.firebaseio.com
  - key: NEXT_PUBLIC_FIREBASE_PROJECT_ID
    value: gliter-argentina
  - key: NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET
    value: gliter-argentina.appspot.com
  - key: NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID
    value: "1084162955705"
  - key: NEXT_PUBLIC_FIREBASE_APP_ID
    value: 1:1084162955705:web:25bb32180d1bdaf724fe68
  - key: NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID
    value: G-MMFQWWFCJD

build:
  command: |
    echo ">>> Cleaning node state"
    rm -rf node_modules package-lock.json pnpm-lock.yaml
    echo ">>> Installing production deps"
    npm ci --omit=dev
    echo ">>> Type-check"
    npm run type-check
    echo ">>> Run build"
    npm run build
  environment:
    - key: NODE_ENV
      value: production

resources:
  cpu: 1
  memoryMiB: 2048
  diskMiB: 4096

handlers:
  - glob: '**'
    script: auto